import{J as ae,C as K,S as fe,i as ue,s as ce,e as b,t as j,c as E,a as W,g as D,d as p,b as v,f as k,I as g,h as S,j as P,l as x,K as z,o as q,L as A,D as J,p as R,n as U,M as de,N as B,k as O,m as G,O as F,v as he,w as _e,x as pe,A as ve,P as M}from"../chunks/vendor-fb7309c6.js";import me from"./Letter.svelte-56c75a35.js";var H;(function(r){r.Unsubmitted="true-gray-800",r.Correct="green-700",r.InWord="yellow-700",r.Incorrect="red-700"})(H||(H={}));var L;(function(r){r.Inactive="INACTIVE",r.InProgress="IN_PROGRESS",r.Invalid="INVALID",r.Submitted="SUBMITTED"})(L||(L={}));var y;(function(r){r.InProgress="IN_PROGRESS",r.Lost="LOST",r.Won="WON"})(y||(y={}));const C=K(null),Q=K(null),we=ae(C,r=>{var e;if(r){const l=[];for(const t of(e=r==null?void 0:r.rows[r==null?void 0:r.activeRow])==null?void 0:e.letters)l.push(t.value);return l.join("")}});var T;(function(r){r.Unsubmitted="true-gray-800",r.Correct="green-700",r.InWord="yellow-700",r.Incorrect="red-700"})(T||(T={}));const Y=async()=>{const r=[];for(let l=0;l<6;l++){const t=[];for(let s=0;s<5;s++){const i={value:"",status:T.Unsubmitted};t.push(i)}const n={status:L.Inactive,letters:t};r.push(n)}const e={status:y.InProgress,activeRow:0,rows:r};e.rows=r,await ke(),C.set(e)},ke=async()=>{const e=await(await fetch("/word")).json();console.log(e.word),Q.set(e.word)};function X(r,e,l){const t=r.slice();return t[1]=e[l],t[12]=l,t}function Z(r,e,l){const t=r.slice();return t[13]=e[l],t[15]=l,t}function $(r){let e,l,t=r[2].toUpperCase()+"",n;return{c(){e=b("p"),l=j("You guessed the word: "),n=j(t),this.h()},l(s){e=E(s,"P",{text:!0});var i=W(e);l=D(i,"You guessed the word: "),n=D(i,t),i.forEach(p),this.h()},h(){v(e,"text","5xl light-500")},m(s,i){k(s,e,i),g(e,l),g(e,n)},p(s,i){i&4&&t!==(t=s[2].toUpperCase()+"")&&S(n,t)},d(s){s&&p(e)}}}function ee(r){let e,l;return{c(){e=b("p"),l=j("That's not a valid word!"),this.h()},l(t){e=E(t,"P",{text:!0});var n=W(e);l=D(n,"That's not a valid word!"),n.forEach(p),this.h()},h(){v(e,"text","5xl light-500")},m(t,n){k(t,e,n),g(e,l)},d(t){t&&p(e)}}}function te(r){let e,l,t=r[2].toUpperCase()+"",n;return{c(){e=b("p"),l=j("You didn't guess the word: "),n=j(t),this.h()},l(s){e=E(s,"P",{text:!0});var i=W(e);l=D(i,"You didn't guess the word: "),n=D(i,t),i.forEach(p),this.h()},h(){v(e,"text","5xl light-500")},m(s,i){k(s,e,i),g(e,l),g(e,n)},p(s,i){i&4&&t!==(t=s[2].toUpperCase()+"")&&S(n,t)},d(s){s&&p(e)}}}function le(r){let e,l=[],t=new Map,n,s,i,_,w,u=r[0].rows;const c=o=>o[1];for(let o=0;o<u.length;o+=1){let a=X(r,u,o),f=c(a);t.set(f,l[o]=re(f,a))}let m=r[0].status===y.Won&&ie(r),d=r[1].status===L.Invalid&&oe(),h=r[0].status===y.Lost&&ne(r);return{c(){e=b("div");for(let o=0;o<l.length;o+=1)l[o].c();n=P(),s=b("div"),m&&m.c(),i=P(),d&&d.c(),_=P(),h&&h.c(),this.h()},l(o){e=E(o,"DIV",{display:!0,grid:!0,gap:!0});var a=W(e);for(let I=0;I<l.length;I+=1)l[I].l(a);a.forEach(p),n=x(o),s=E(o,"DIV",{display:!0,text:!0,mx:!0,p:!0,cursor:!0});var f=W(s);m&&m.l(f),i=x(f),d&&d.l(f),_=x(f),h&&h.l(f),f.forEach(p),this.h()},h(){v(e,"display","grid"),v(e,"grid","cols-5 rows-6"),v(e,"gap","2"),v(s,"display","flex"),v(s,"text","true-gray-400"),v(s,"mx","auto"),v(s,"p","2"),v(s,"cursor","hover:pointer")},m(o,a){k(o,e,a);for(let f=0;f<l.length;f+=1)l[f].m(e,null);k(o,n,a),k(o,s,a),m&&m.m(s,null),g(s,i),d&&d.m(s,null),g(s,_),h&&h.m(s,null),w=!0},p(o,a){a&1&&(u=o[0].rows,G(),l=z(l,a,c,1,o,u,t,e,F,re,null,X),q()),o[0].status===y.Won?m?m.p(o,a):(m=ie(o),m.c(),m.m(s,i)):m&&(m.d(1),m=null),o[1].status===L.Invalid?d||(d=oe(),d.c(),d.m(s,_)):d&&(d.d(1),d=null),o[0].status===y.Lost?h?h.p(o,a):(h=ne(o),h.c(),h.m(s,null)):h&&(h.d(1),h=null)},i(o){if(!w){for(let a=0;a<u.length;a+=1)R(l[a]);w=!0}},o(o){for(let a=0;a<l.length;a+=1)U(l[a]);w=!1},d(o){o&&p(e);for(let a=0;a<l.length;a+=1)l[a].d();o&&p(n),o&&p(s),m&&m.d(),d&&d.d(),h&&h.d()}}}function se(r,e){let l,t,n,s,i;return t=new me({props:{letter:e[13]}}),{key:r,first:null,c(){l=b("div"),he(t.$$.fragment),n=P(),this.h()},l(_){l=E(_,"DIV",{col:!0});var w=W(l);_e(t.$$.fragment,w),n=x(w),w.forEach(p),this.h()},h(){v(l,"col",s="start-"+e[15]),this.first=l},m(_,w){k(_,l,w),pe(t,l,null),g(l,n),i=!0},p(_,w){e=_;const u={};w&1&&(u.letter=e[13]),t.$set(u),(!i||w&1&&s!==(s="start-"+e[15]))&&v(l,"col",s)},i(_){i||(R(t.$$.fragment,_),i=!0)},o(_){U(t.$$.fragment,_),i=!1},d(_){_&&p(l),ve(t)}}}function re(r,e){let l,t=[],n=new Map,s,i,_=e[1].letters;const w=u=>u[12]+"."+u[15];for(let u=0;u<_.length;u+=1){let c=Z(e,_,u),m=w(c);n.set(m,t[u]=se(m,c))}return{key:r,first:null,c(){l=O();for(let u=0;u<t.length;u+=1)t[u].c();s=O(),this.h()},l(u){l=O();for(let c=0;c<t.length;c+=1)t[c].l(u);s=O(),this.h()},h(){this.first=l},m(u,c){k(u,l,c);for(let m=0;m<t.length;m+=1)t[m].m(u,c);k(u,s,c),i=!0},p(u,c){e=u,c&1&&(_=e[1].letters,G(),t=z(t,c,w,1,e,_,n,s.parentNode,F,se,s,Z),q())},i(u){if(!i){for(let c=0;c<_.length;c+=1)R(t[c]);i=!0}},o(u){for(let c=0;c<t.length;c+=1)U(t[c]);i=!1},d(u){u&&p(l);for(let c=0;c<t.length;c+=1)t[c].d(u);u&&p(s)}}}function ie(r){let e,l,t,n;return{c(){e=b("p"),l=j("New Word"),this.h()},l(s){e=E(s,"P",{text:!0});var i=W(e);l=D(i,"New Word"),i.forEach(p),this.h()},h(){v(e,"text","5xl light-500")},m(s,i){k(s,e,i),g(e,l),t||(n=A(e,"click",r[4]),t=!0)},p:J,d(s){s&&p(e),t=!1,n()}}}function oe(r){let e,l;return{c(){e=b("p"),l=j("silly fix lol"),this.h()},l(t){e=E(t,"P",{text:!0,opacity:!0});var n=W(e);l=D(n,"silly fix lol"),n.forEach(p),this.h()},h(){v(e,"text","5xl light-500"),v(e,"opacity","0")},m(t,n){k(t,e,n),g(e,l)},d(t){t&&p(e)}}}function ne(r){let e,l,t,n;return{c(){e=b("p"),l=j("Try again!"),this.h()},l(s){e=E(s,"P",{text:!0});var i=W(e);l=D(i,"Try again!"),i.forEach(p),this.h()},h(){v(e,"text","5xl light-500")},m(s,i){k(s,e,i),g(e,l),t||(n=A(e,"click",r[5]),t=!0)},p:J,d(s){s&&p(e),t=!1,n()}}}function ge(r){let e,l,t,n,s,i,_,w,u,c,m,d=r[0].status===y.Won&&$(r),h=r[1].status===L.Invalid&&ee(),o=r[0].status===y.Lost&&te(r),a=r[0]&&le(r);return{c(){e=P(),l=b("div"),t=P(),n=b("div"),s=b("div"),d&&d.c(),i=P(),h&&h.c(),_=P(),o&&o.c(),w=P(),a&&a.c(),this.h()},l(f){de('[data-svelte="svelte-akvgl"]',document.head).forEach(p),e=x(f),l=E(f,"DIV",{row:!0,display:!0,class:!0}),W(l).forEach(p),t=x(f),n=E(f,"DIV",{display:!0,flex:!0,align:!0,justify:!0,h:!0});var V=W(n);s=E(V,"DIV",{display:!0,text:!0,mx:!0,p:!0});var N=W(s);d&&d.l(N),i=x(N),h&&h.l(N),_=x(N),o&&o.l(N),N.forEach(p),w=x(V),a&&a.l(V),V.forEach(p),this.h()},h(){document.title="Wordles",v(l,"row","start-1 start-2 start-3 start-4 start-5 start-6"),v(l,"display","hidden"),v(l,"class","bg-true-gray-800"),v(s,"display","flex"),v(s,"text","true-gray-400"),v(s,"mx","auto"),v(s,"p","2"),v(n,"display","flex"),v(n,"flex","col"),v(n,"align","items-center"),v(n,"justify","content-center"),v(n,"h","100vh")},m(f,I){k(f,e,I),k(f,l,I),k(f,t,I),k(f,n,I),g(n,s),d&&d.m(s,null),g(s,i),h&&h.m(s,null),g(s,_),o&&o.m(s,null),g(n,w),a&&a.m(n,null),u=!0,c||(m=A(window,"keydown",r[3]),c=!0)},p(f,[I]){f[0].status===y.Won?d?d.p(f,I):(d=$(f),d.c(),d.m(s,i)):d&&(d.d(1),d=null),f[1].status===L.Invalid?h||(h=ee(),h.c(),h.m(s,_)):h&&(h.d(1),h=null),f[0].status===y.Lost?o?o.p(f,I):(o=te(f),o.c(),o.m(s,null)):o&&(o.d(1),o=null),f[0]?a?(a.p(f,I),I&1&&R(a,1)):(a=le(f),a.c(),R(a,1),a.m(n,null)):a&&(G(),U(a,1,1,()=>{a=null}),q())},i(f){u||(R(a),u=!0)},o(f){U(a),u=!1},d(f){f&&p(e),f&&p(l),f&&p(t),f&&p(n),d&&d.d(),h&&h.d(),o&&o.d(),a&&a.d(),c=!1,m()}}}const Ee=!1,We=!1;async function Pe({}){return await Y(),{status:200}}function ye(r,e,l){let t,n,s,i,_,w;B(r,C,o=>l(0,i=o)),B(r,Q,o=>l(2,_=o)),B(r,we,o=>l(8,w=o));const u=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],c=async()=>{for(const o in t.letters){const a=t.letters[o];a.value===_[o]?a.status=T.Correct:_.includes(a.value)?a.status=T.InWord:a.status=T.Incorrect}},m=async o=>{const a=o.key;if(console.log(a),i.status===(y.Won||y.Lost)){a==="r"&&await Y();return}n||a==="Enter"&&((await fetch(`/check.${w}`)).ok?(c(),w===_?M(C,i.status=y.Won,i):i.activeRow===5?M(C,i.status=y.Lost,i):M(C,i.activeRow++,i)):l(1,t.status=L.Invalid,t)),a==="Backspace"&&(n?M(C,i.rows[i.activeRow].letters[s-1].value="",i):l(1,t.letters[4].value="",t),C.set(i)),u.indexOf(a)!==-1&&(n&&(n.value=a),C.set(i))},d=()=>Y(),h=()=>Y();return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=i.rows[i.activeRow]),r.$$.dirty&2&&(n=t.letters.find(o=>o.value==="")),r.$$.dirty&2&&(s=t.letters.findIndex(o=>o.value===""))},[i,t,_,m,d,h]}class xe extends fe{constructor(e){super();ue(this,e,ye,ge,ce,{})}}export{xe as default,Pe as load,We as prerender,Ee as ssr};
